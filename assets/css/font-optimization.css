/* 
 * Font Optimization CSS
 * Comprehensive font loading and performance optimizations
 * 
 * Features:
 * - Font-display: swap for all web fonts
 * - Optimized font stacks with system fallbacks
 * - Progressive enhancement classes
 * - Font loading states
 * - Performance-optimized font rendering
 */

/* ==========================================================================
   Font Face Declarations with font-display: swap
   ========================================================================== */

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 300;
    font-display: swap;
    src: url('/assets/fonts/Inter-Light.woff2') format('woff2'),
         url('/assets/fonts/Inter-Light.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('/assets/fonts/Inter-Regular.woff2') format('woff2'),
         url('/assets/fonts/Inter-Regular.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 500;
    font-display: swap;
    src: url('/assets/fonts/Inter-Medium.woff2') format('woff2'),
         url('/assets/fonts/Inter-Medium.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 600;
    font-display: swap;
    src: url('/assets/fonts/Inter-SemiBold.woff2') format('woff2'),
         url('/assets/fonts/Inter-SemiBold.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url('/assets/fonts/Inter-Bold.woff2') format('woff2'),
         url('/assets/fonts/Inter-Bold.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
    font-family: 'JetBrains Mono';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('/assets/fonts/JetBrainsMono-Regular.woff2') format('woff2'),
         url('/assets/fonts/JetBrainsMono-Regular.woff') format('woff');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

/* ==========================================================================
   Optimized Font Stacks with System Fallbacks
   ========================================================================== */

:root {
    /* Primary font stack */
    --font-primary: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    
    /* Monospace font stack */
    --font-mono: 'JetBrains Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
    
    /* System UI font stack for immediate rendering */
    --font-system: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    
    /* Font weights */
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    
    /* Line heights optimized for readability */
    --line-height-tight: 1.25;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;
    
    /* Letter spacing for better rendering */
    --letter-spacing-tight: -0.025em;
    --letter-spacing-normal: 0;
    --letter-spacing-wide: 0.025em;
}

/* ==========================================================================
   Font Loading States
   ========================================================================== */

/* Initial loading state - use system fonts */
.fonts-loading {
    font-family: var(--font-system);
}

.fonts-loading .monospace,
.fonts-loading code,
.fonts-loading pre {
    font-family: Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
}

/* Fonts successfully loaded */
.fonts-loaded {
    font-family: var(--font-primary);
}

.fonts-loaded .monospace,
.fonts-loaded code,
.fonts-loaded pre {
    font-family: var(--font-mono);
}

/* Font loading failed - fallback to system fonts */
.fonts-failed {
    font-family: var(--font-system);
}

.fonts-failed .monospace,
.fonts-failed code,
.fonts-failed pre {
    font-family: Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
}

/* ==========================================================================
   Progressive Enhancement
   ========================================================================== */

/* Enhanced typography when fonts are loaded */
.font-enhanced {
    /* Enable advanced font features */
    font-feature-settings: 
        "liga" 1,    /* Ligatures */
        "kern" 1,    /* Kerning */
        "calt" 1,    /* Contextual alternates */
        "zero" 1;    /* Slashed zero */
    
    font-variant-ligatures: common-ligatures;
    font-variant-numeric: tabular-nums;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Enhanced monospace features */
.font-enhanced .monospace,
.font-enhanced code,
.font-enhanced pre {
    font-feature-settings: 
        "liga" 0,    /* Disable ligatures for code */
        "kern" 1,    /* Enable kerning */
        "zero" 1,    /* Slashed zero */
        "tnum" 1;    /* Tabular numbers */
    
    font-variant-ligatures: none;
    font-variant-numeric: tabular-nums slashed-zero;
}

/* ==========================================================================
   Base Typography Styles
   ========================================================================== */

html {
    /* Set base font on html for easier rem calculations */
    font-size: 16px;
    line-height: var(--line-height-normal);
}

body {
    /* Default to system fonts for immediate rendering */
    font-family: var(--font-system);
    font-weight: var(--font-weight-normal);
    font-size: 1rem;
    line-height: var(--line-height-normal);
    letter-spacing: var(--letter-spacing-normal);
    
    /* Optimize text rendering */
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: auto;
    -moz-osx-font-smoothing: auto;
    
    /* Will be upgraded when fonts load */
    transition: font-family 0.1s ease-out;
}

/* ==========================================================================
   Typography Scale
   ========================================================================== */

h1, h2, h3, h4, h5, h6 {
    font-family: inherit;
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
    letter-spacing: var(--letter-spacing-tight);
    margin: 0 0 1rem 0;
}

h1 {
    font-size: 3rem;
    font-weight: var(--font-weight-bold);
}

h2 {
    font-size: 2.25rem;
}

h3 {
    font-size: 1.875rem;
}

h4 {
    font-size: 1.5rem;
}

h5 {
    font-size: 1.25rem;
}

h6 {
    font-size: 1.125rem;
}

p {
    margin: 0 0 1rem 0;
    line-height: var(--line-height-normal);
}

/* ==========================================================================
   Code and Monospace Elements
   ========================================================================== */

code,
kbd,
samp,
pre {
    font-family: Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
    font-size: 0.875em;
}

pre {
    font-size: 0.875rem;
    line-height: var(--line-height-normal);
    overflow-x: auto;
    padding: 1rem;
    background-color: #f8f9fa;
    border-radius: 0.375rem;
}

code {
    padding: 0.125rem 0.25rem;
    background-color: #f1f3f4;
    border-radius: 0.25rem;
    font-size: 0.875em;
}

pre code {
    padding: 0;
    background-color: transparent;
    border-radius: 0;
    font-size: inherit;
}

/* ==========================================================================
   Font Loading Performance Hints
   ========================================================================== */

/* Prevent invisible text during font swap period */
.font-loading-placeholder {
    font-display: swap;
}

/* Reduce layout shift during font loading */
.font-size-adjust {
    font-size-adjust: 0.5;
}

/* ==========================================================================
   Responsive Typography
   ========================================================================== */

@media (max-width: 768px) {
    html {
        font-size: 14px;
    }
    
    h1 {
        font-size: 2.5rem;
    }
    
    h2 {
        font-size: 2rem;
    }
    
    h3 {
        font-size: 1.75rem;
    }
}

@media (max-width: 480px) {
    html {
        font-size: 14px;
    }
    
    h1 {
        font-size: 2rem;
    }
    
    h2 {
        font-size: 1.75rem;
    }
    
    h3 {
        font-size: 1.5rem;
    }
}

/* ==========================================================================
   Print Optimizations
   ========================================================================== */

@media print {
    body {
        font-family: var(--font-system);
        color: #000;
        background: #fff;
    }
    
    h1, h2, h3, h4, h5, h6 {
        page-break-after: avoid;
    }
    
    pre, blockquote {
        page-break-inside: avoid;
    }
}

/* ==========================================================================
   Accessibility Improvements
   ========================================================================== */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
    body {
        transition: none;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    body {
        font-weight: var(--font-weight-medium);
    }
}

/* Dark mode font adjustments */
@media (prefers-color-scheme: dark) {
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
}