class FontOptimizer{constructor(t={}){this.options={strategy:"progressive",criticalFonts:["Inter-Regular","Inter-Medium","Inter-SemiBold"],fallbackFonts:{Inter:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',"JetBrains Mono":'Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace'},timeout:3e3,...t},this.loadedFonts=new Set,this.fontLoadPromises=new Map,this.init()}init(){this.addFontDisplayCSS(),this.preloadCriticalFonts(),this.setupFallbackFonts(),this.initProgressiveLoading(),"fonts"in document&&(document.fonts.addEventListener("loadingdone",this.handleFontsLoaded.bind(this)),document.fonts.addEventListener("loadingerror",this.handleFontError.bind(this)))}addFontDisplayCSS(){const t=`\n            /* Font optimization styles */\n            @font-face {\n                font-family: 'Inter';\n                font-style: normal;\n                font-weight: 300;\n                font-display: swap;\n                src: url('/assets/fonts/Inter-Light.woff2') format('woff2'),\n                     url('/assets/fonts/Inter-Light.woff') format('woff');\n            }\n            \n            @font-face {\n                font-family: 'Inter';\n                font-style: normal;\n                font-weight: 400;\n                font-display: swap;\n                src: url('/assets/fonts/Inter-Regular.woff2') format('woff2'),\n                     url('/assets/fonts/Inter-Regular.woff') format('woff');\n            }\n            \n            @font-face {\n                font-family: 'Inter';\n                font-style: normal;\n                font-weight: 500;\n                font-display: swap;\n                src: url('/assets/fonts/Inter-Medium.woff2') format('woff2'),\n                     url('/assets/fonts/Inter-Medium.woff') format('woff');\n            }\n            \n            @font-face {\n                font-family: 'Inter';\n                font-style: normal;\n                font-weight: 600;\n                font-display: swap;\n                src: url('/assets/fonts/Inter-SemiBold.woff2') format('woff2'),\n                     url('/assets/fonts/Inter-SemiBold.woff') format('woff');\n            }\n            \n            @font-face {\n                font-family: 'Inter';\n                font-style: normal;\n                font-weight: 700;\n                font-display: swap;\n                src: url('/assets/fonts/Inter-Bold.woff2') format('woff2'),\n                     url('/assets/fonts/Inter-Bold.woff') format('woff');\n            }\n            \n            @font-face {\n                font-family: 'JetBrains Mono';\n                font-style: normal;\n                font-weight: 400;\n                font-display: swap;\n                src: url('/assets/fonts/JetBrainsMono-Regular.woff2') format('woff2'),\n                     url('/assets/fonts/JetBrainsMono-Regular.woff') format('woff');\n            }\n            \n            /* Font loading states */\n            .fonts-loading {\n                font-family: ${this.options.fallbackFonts.Inter};\n            }\n            \n            .fonts-loaded {\n                font-family: 'Inter', ${this.options.fallbackFonts.Inter};\n            }\n            \n            .fonts-failed {\n                font-family: ${this.options.fallbackFonts.Inter};\n            }\n            \n            /* Progressive enhancement classes */\n            .font-enhanced {\n                font-feature-settings: "liga" 1, "kern" 1;\n                font-variant-ligatures: common-ligatures;\n                text-rendering: optimizeLegibility;\n            }\n        `,n=document.createElement("style");n.textContent=t,document.head.appendChild(n)}preloadCriticalFonts(){this.options.criticalFonts.forEach(t=>{this.preloadFont(t)})}preloadFont(t){this.getFontUrls(t).forEach(({url:t,format:n})=>{const o=document.createElement("link");o.rel="preload",o.href=t,o.as="font",o.type=`font/${n}`,o.crossOrigin="anonymous",document.head.appendChild(o)})}getFontUrls(t){return{"Inter-Light":[{url:"/assets/fonts/Inter-Light.woff2",format:"woff2"},{url:"/assets/fonts/Inter-Light.woff",format:"woff"}],"Inter-Regular":[{url:"/assets/fonts/Inter-Regular.woff2",format:"woff2"},{url:"/assets/fonts/Inter-Regular.woff",format:"woff"}],"Inter-Medium":[{url:"/assets/fonts/Inter-Medium.woff2",format:"woff2"},{url:"/assets/fonts/Inter-Medium.woff",format:"woff"}],"Inter-SemiBold":[{url:"/assets/fonts/Inter-SemiBold.woff2",format:"woff2"},{url:"/assets/fonts/Inter-SemiBold.woff",format:"woff"}],"Inter-Bold":[{url:"/assets/fonts/Inter-Bold.woff2",format:"woff2"},{url:"/assets/fonts/Inter-Bold.woff",format:"woff"}],"JetBrains-Regular":[{url:"/assets/fonts/JetBrainsMono-Regular.woff2",format:"woff2"},{url:"/assets/fonts/JetBrainsMono-Regular.woff",format:"woff"}]}[t]||[]}setupFallbackFonts(){document.body.classList.add("fonts-loading");const t=document.createElement("style");t.textContent=`\n            body {\n                font-family: ${this.options.fallbackFonts.Inter};\n            }\n            \n            .monospace, code, pre {\n                font-family: ${this.options.fallbackFonts["JetBrains Mono"]};\n            }\n        `,document.head.appendChild(t)}initProgressiveLoading(){if(!("fonts"in document))return void this.fallbackFontLoading();const t=[];[{family:"Inter",weight:"400"},{family:"Inter",weight:"500"},{family:"Inter",weight:"600"},{family:"Inter",weight:"700"},{family:"JetBrains Mono",weight:"400"}].forEach(({family:n,weight:o})=>{const e=this.loadFont(n,o);t.push(e)}),Promise.allSettled(t).then(t=>{const n=t.filter(t=>"fulfilled"===t.status).length,o=t.filter(t=>"rejected"===t.status).length;n>0&&this.handleFontsLoaded(),o>0&&console.warn(`Failed to load ${o} fonts`)}),setTimeout(()=>{document.body.classList.contains("fonts-loaded")||this.handleFontTimeout()},this.options.timeout)}async loadFont(t,n="400",o="normal"){const e=`${t}-${n}-${o}`;if(this.loadedFonts.has(e))return Promise.resolve();if(this.fontLoadPromises.has(e))return this.fontLoadPromises.get(e);const s=new FontFace(t,`url(/assets/fonts/${this.getFontFileName(t,n)}.woff2)`,{weight:n,style:o,display:"swap"}).load().then(t=>(document.fonts.add(t),this.loadedFonts.add(e),t));return this.fontLoadPromises.set(e,s),s}getFontFileName(t,n){return{Inter:{300:"Inter-Light",400:"Inter-Regular",500:"Inter-Medium",600:"Inter-SemiBold",700:"Inter-Bold"},"JetBrains Mono":{400:"JetBrainsMono-Regular"}}[t]?.[n]||`${t}-Regular`}handleFontsLoaded(){document.body.classList.remove("fonts-loading"),document.body.classList.add("fonts-loaded"),document.body.classList.add("font-enhanced");const t=new CustomEvent("fontsLoaded",{detail:{loadedFonts:Array.from(this.loadedFonts)}});document.dispatchEvent(t)}handleFontError(t){console.warn("Font loading error:",t),document.body.classList.remove("fonts-loading"),document.body.classList.add("fonts-failed")}handleFontTimeout(){console.warn("Font loading timeout - proceeding with fallbacks"),document.body.classList.remove("fonts-loading"),document.body.classList.add("fonts-failed")}fallbackFontLoading(){setTimeout(()=>{document.body.classList.remove("fonts-loading"),document.body.classList.add("fonts-loaded")},1e3)}getStats(){return{loadedFonts:Array.from(this.loadedFonts),supportsAPI:"fonts"in document,fontCount:this.loadedFonts.size}}}document.addEventListener("DOMContentLoaded",()=>{window.FontOptimizer=new FontOptimizer}),"undefined"!=typeof module&&module.exports&&(module.exports=FontOptimizer);