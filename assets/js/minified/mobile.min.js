class MobileController{constructor(){this.navToggle=document.querySelector(".nav__toggle"),this.navMenu=document.querySelector(".nav__menu"),this.navLinks=document.querySelectorAll(".nav__link"),this.body=document.body,this.isMenuOpen=!1,this.breakpoint=992,this.init()}init(){this.navToggle&&this.navMenu?(this.setupEventListeners(),this.setupAccessibility(),this.addToggleStyles(),console.debug("[MobileController] Initialized")):console.warn("[MobileController] Navigation elements not found")}setupEventListeners(){this.navToggle.addEventListener("click",e=>{e.preventDefault(),this.toggleNavigation()}),this.navLinks.forEach(e=>{e.addEventListener("click",()=>{this.isMenuOpen&&this.closeNavigation()})}),document.addEventListener("click",e=>this.handleOutsideClick(e)),window.addEventListener("resize",()=>this.handleResize()),document.addEventListener("keydown",e=>this.handleKeyDown(e)),this.setupTouchEvents()}setupAccessibility(){this.updateAriaAttributes(!1),this.navToggle.setAttribute("role","button"),this.navToggle.setAttribute("aria-controls","nav-menu"),this.navMenu.setAttribute("role","navigation"),this.navMenu.id="nav-menu"}toggleNavigation(){this.isMenuOpen=!this.isMenuOpen,this.navMenu.classList.toggle("show-menu",this.isMenuOpen),this.body.classList.toggle("nav-open",this.isMenuOpen),this.toggleOverlay(this.isMenuOpen),this.body.style.overflow=this.isMenuOpen?"hidden":"",this.updateAriaAttributes(this.isMenuOpen),this.announceMenuState(this.isMenuOpen),this.isMenuOpen?this.trapFocus():this.releaseFocus(),console.debug("[MobileController] Navigation "+(this.isMenuOpen?"opened":"closed"))}toggleOverlay(e){let n=document.querySelector(".mobile-nav-overlay");e&&!n?(n=document.createElement("div"),n.className="mobile-nav-overlay",document.body.appendChild(n),n.offsetHeight,n.classList.add("active"),n.addEventListener("click",()=>this.closeNavigation())):!e&&n&&(n.classList.remove("active"),setTimeout(()=>n.remove(),300))}closeNavigation(){this.isMenuOpen&&(this.isMenuOpen=!1,this.navMenu.classList.remove("show-menu"),this.body.classList.remove("nav-open"),this.toggleOverlay(!1),this.body.style.overflow="",this.updateAriaAttributes(!1),this.releaseFocus(),console.debug("[MobileController] Navigation closed"))}handleOutsideClick(e){this.isMenuOpen&&(this.navMenu.contains(e.target)||this.navToggle.contains(e.target)||this.closeNavigation())}handleResize(){window.innerWidth>=this.breakpoint&&this.isMenuOpen&&this.closeNavigation()}handleKeyDown(e){"Escape"===e.key&&this.isMenuOpen&&(this.closeNavigation(),this.navToggle.focus()),this.isMenuOpen&&"Tab"===e.key&&this.handleTabNavigation(e)}handleTabNavigation(e){const n=this.navMenu.querySelectorAll('a, button, [tabindex]:not([tabindex="-1"])'),t=n[0],i=n[n.length-1];e.shiftKey?document.activeElement===t&&(e.preventDefault(),i.focus()):document.activeElement===i&&(e.preventDefault(),t.focus())}trapFocus(){const e=this.navMenu.querySelector("a, button");e&&setTimeout(()=>e.focus(),100)}releaseFocus(){this.navToggle.focus()}updateAriaAttributes(e){this.navToggle.setAttribute("aria-expanded",e?"true":"false"),this.navToggle.setAttribute("aria-label",e?"Close menu":"Open menu"),this.navMenu.setAttribute("aria-hidden",e?"false":"true")}announceMenuState(e){const n=document.createElement("div");n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),n.className="sr-only",n.textContent=e?"Menu opened":"Menu closed",document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},1e3)}setupTouchEvents(){let e=0,n=0;this.navMenu.addEventListener("touchstart",n=>{e=n.touches[0].clientY}),this.navMenu.addEventListener("touchend",t=>{n=t.changedTouches[0].clientY,e-n>100&&this.closeNavigation()}),this.navMenu.addEventListener("touchmove",e=>{this.isMenuOpen&&e.preventDefault()},{passive:!1})}addToggleStyles(){if(document.querySelector("#mobile-nav-styles"))return;const e=document.createElement("style");e.id="mobile-nav-styles",e.textContent="\n            .nav__toggle {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                width: 30px;\n                height: 30px;\n                background: transparent;\n                border: none;\n                cursor: pointer;\n                padding: 0;\n                z-index: 1001;\n                transition: transform 0.3s ease;\n            }\n            \n            .nav__toggle:hover {\n                transform: scale(1.1);\n            }\n            \n            .nav__toggle-bar {\n                width: 100%;\n                height: 2px;\n                background: var(--text-color);\n                margin: 3px 0;\n                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n                transform-origin: center;\n            }\n            \n            .nav__toggle.active .nav__toggle-bar:nth-child(1) {\n                transform: rotate(45deg) translate(6px, 6px);\n            }\n            \n            .nav__toggle.active .nav__toggle-bar:nth-child(2) {\n                opacity: 0;\n                transform: scale(0);\n            }\n            \n            .nav__toggle.active .nav__toggle-bar:nth-child(3) {\n                transform: rotate(-45deg) translate(6px, -6px);\n            }\n            \n            @media (min-width: 992px) {\n                .nav__toggle {\n                    display: none;\n                }\n            }\n            \n            .nav__menu.active {\n                transform: translateX(0);\n                opacity: 1;\n                visibility: visible;\n            }\n            \n            @media (max-width: 991px) {\n                .nav__menu {\n                    position: fixed;\n                    top: 0;\n                    right: 0;\n                    width: 100%;\n                    height: 100vh;\n                    background: var(--bg-color);\n                    display: flex;\n                    flex-direction: column;\n                    justify-content: center;\n                    align-items: center;\n                    transform: translateX(100%);\n                    opacity: 0;\n                    visibility: hidden;\n                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n                    z-index: 1000;\n                    padding: 2rem;\n                }\n                \n                .nav__item {\n                    margin: 1rem 0;\n                    opacity: 0;\n                    transform: translateY(20px);\n                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n                }\n                \n                .nav__menu.active .nav__item {\n                    opacity: 1;\n                    transform: translateY(0);\n                }\n                \n                .nav__menu.active .nav__item:nth-child(1) { transition-delay: 0.1s; }\n                .nav__menu.active .nav__item:nth-child(2) { transition-delay: 0.2s; }\n                .nav__menu.active .nav__item:nth-child(3) { transition-delay: 0.3s; }\n                .nav__menu.active .nav__item:nth-child(4) { transition-delay: 0.4s; }\n                .nav__menu.active .nav__item:nth-child(5) { transition-delay: 0.5s; }\n                .nav__menu.active .nav__item:nth-child(6) { transition-delay: 0.6s; }\n                \n                .nav__link {\n                    font-size: 1.5rem;\n                    font-weight: 500;\n                    text-align: center;\n                    padding: 1rem;\n                    display: block;\n                    width: 100%;\n                }\n            }\n            \n            .sr-only {\n                position: absolute !important;\n                width: 1px !important;\n                height: 1px !important;\n                padding: 0 !important;\n                margin: -1px !important;\n                overflow: hidden !important;\n                clip: rect(0, 0, 0, 0) !important;\n                white-space: nowrap !important;\n                border: 0 !important;\n            }\n        ",document.head.appendChild(e)}isMobile(){return window.innerWidth<this.breakpoint}handleResize(){}isMenuOpen(){return this.isMenuOpen}forceClose(){this.isMenuOpen&&this.closeNavigation()}destroy(){document.removeEventListener("click",this.handleOutsideClick),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeyDown),this.body.style.overflow="";const e=document.getElementById("mobile-nav-styles");e&&e.remove()}}