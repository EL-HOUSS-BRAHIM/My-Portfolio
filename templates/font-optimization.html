<!-- 
Font Preloading and Optimization HTML Template
Include this in the <head> section for optimal font loading performance
-->

<!-- Font Preloading for Critical Fonts -->
<link rel="preload" href="/assets/fonts/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="/assets/fonts/Inter-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="/assets/fonts/Inter-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Font Display CSS (Critical) -->
<style>
/* Critical font styles - inline for immediate rendering */
:root {
    --font-system: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
}

body {
    font-family: var(--font-system);
    font-size: 16px;
    line-height: 1.5;
    transition: font-family 0.1s ease-out;
}

/* Font loading states */
.fonts-loading { font-family: var(--font-system); }
.fonts-loaded { font-family: 'Inter', var(--font-system); }
.fonts-failed { font-family: var(--font-system); }

/* Prevent layout shift */
h1, h2, h3, h4, h5, h6 {
    font-family: inherit;
    line-height: 1.25;
    margin: 0 0 1rem 0;
}
</style>

<!-- Font Optimization CSS (Load asynchronously) -->
<link rel="preload" href="/assets/css/font-optimization.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="/assets/css/font-optimization.css"></noscript>

<!-- Font Optimizer JavaScript (Load asynchronously) -->
<script>
// Inline critical font loading functionality
(function() {
    'use strict';
    
    // Add initial loading class
    document.documentElement.classList.add('fonts-loading');
    
    // Simple fallback for browsers without Font Loading API
    if (!('fonts' in document)) {
        setTimeout(function() {
            document.documentElement.classList.remove('fonts-loading');
            document.documentElement.classList.add('fonts-loaded');
        }, 1000);
        return;
    }
    
    // Check if fonts are already loaded
    if (document.fonts.ready) {
        document.fonts.ready.then(function() {
            document.documentElement.classList.remove('fonts-loading');
            document.documentElement.classList.add('fonts-loaded');
        });
    }
    
    // Timeout fallback
    setTimeout(function() {
        if (document.documentElement.classList.contains('fonts-loading')) {
            document.documentElement.classList.remove('fonts-loading');
            document.documentElement.classList.add('fonts-failed');
        }
    }, 3000);
})();
</script>

<!-- Load full font optimizer asynchronously -->
<script src="/assets/js-clean/font-optimizer.js" async></script>

<!-- Font Performance Monitoring (Optional) -->
<script>
// Monitor font loading performance
if ('fonts' in document && 'PerformanceObserver' in window) {
    const observer = new PerformanceObserver(function(list) {
        const entries = list.getEntries();
        entries.forEach(function(entry) {
            if (entry.entryType === 'resource' && entry.name.includes('font')) {
                console.log('Font loaded:', entry.name, 'in', entry.duration + 'ms');
            }
        });
    });
    
    observer.observe({ entryTypes: ['resource'] });
}
</script>